<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>评论管理</title>
    <link rel="stylesheet" type="text/css" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css"/>
    <script src="http://how2j.cn/study/vue.min.js"></script>
    <style type="text/css">
    </style>
    <script type="text/javascript" src="https://cdn.bootcss.com/jquery/2.2.4/jquery.js">
    </script>
    <script type="text/javascript" src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.js"></script>
    <link rel="stylesheet" href="../layui/css/layui.css" media="all">
</head>
<body>
<table style="height: 90%" id="articlecomment" lay-filter="test">

</table>
<script src="../layui/layui.js"></script>
<script>
    layui.use('table', function () {
        var table = layui.table;

        //第一个实例
        table.render({
            id:'articlecomment'
            ,elem: '#articlecomment'
            , height: 680
            , url: 'http://localhost:8080/admin/getarticlecomment' //数据接口
            //开发时更改为localhost
            , page: true //开启分页
            , limit: 15
            , limits: [15, 20, 30]
            , cols: [[ //表头
                {field: 'id', title: 'ID', width: 80, sort: true, fixed: 'left'}
                , {field: 'articletitle', title: '文章标题', width: 100}
                , {field: 'commentusername', title: '评论人', width: 250}
                , {field: 'text', title: '评论内容', width: 150, toolbar: '#text'}
                , {field: 'time', title: '评论时间', width: 150}
                , {field: 'status', title: '评论状态', width: 150, templet: '#switchstatus', unresize: true}
            ]]
            , parseData: function (res) { //res 即为原始返回的数据
                return {
                    success: true,
                    code: res.code,
                    data: res.data, //解析数据列表
                    count: res.count
                };
            }
        });

    })

    $("#titlesearch").click(function () {
        var title = $("#titleinput").val();
        table = layui.table;
        table.reload('articleinfo', {
            url: "http://localhost:8080/admin/getarticleinfo"
            , methods: "post"
            , page: {
                curr: 1 //重新从第 1 页开始
            }
            , where: {
                'title': title
            }
        },'data')
    })
    $("#namesearch").click(function () {
        var name = $("#nameinput").val();
        table = layui.table;
        table.reload('articleinfo', {
            url: "http://localhost:8080/admin/getarticleinfobyname"
            , methods: "post"
            , page: {
                curr: 1 //重新从第 1 页开始
            }
            , where: {
                'name': name
            }
        },'data')
    })
</script>
</body>
</html>